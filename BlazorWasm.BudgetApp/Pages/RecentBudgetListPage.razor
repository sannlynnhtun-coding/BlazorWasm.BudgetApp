@if (Model != null)
{
    <div class="budgets">
        @if (Model.lstBudget != null && Model.lstBudget.Count > 0)
        {
            foreach (var item in Model.lstBudget)
            {
                <BudgetCardPage Budget="item" />
            }
        }
    </div>

    <nav>
        <ul class="pagination">
            <li class="page-item">
                <a @onclick="() => BudgetData(Model.CurrentPageNo - 1)" class="page-link" href="javascript:void(0)" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                    <span class="sr-only">Previous</span>
                </a>
            </li>
            @{
                bool firstDesign = Model.CurrentPageNo <= 3 || Model.CurrentPageNo >= Model.TotalPageNo - 2;
                bool secondDesign = !firstDesign;
            }
            @if (firstDesign)
            {
                @*<< 1 2 3 4 ... 38 39 40 >>*@
                int leftEndPageNo = 4;
                bool rightEndPageNoExist = Model.TotalPageNo - 3 > leftEndPageNo;
                if (!rightEndPageNoExist)
                {
                    leftEndPageNo = Model.TotalPageNo;
                }
                @for (int i = 1; i <= leftEndPageNo; i++)
                {
                    if (i == Model.CurrentPageNo)
                    {
                        <li class="page-item active">
                            <a class="page-link" href="javascript:void(0)">@i</a>
                        </li>
                    }
                    else
                    {
                        <li class="page-item">
                            <a @onclick="() => BudgetData(i)" class="page-link" href="javascript:void(0)">@i</a>
                        </li>
                    }
                }
                @if (rightEndPageNoExist)
                {
                    <li class="page-item">
                        <a class="page-link" href="javascript:void(0)">...</a>
                    </li>
                    @for (int i = Model.TotalPageNo - 3; i <= Model.TotalPageNo; i++)
                    {
                        if (i == Model.CurrentPageNo)
                        {
                            <li class="page-item active">
                                <a class="page-link" href="javascript:void(0)">@i</a>
                            </li>
                        }
                        else
                        {
                            <li class="page-item">
                                <a @onclick="() => BudgetData(i)" class="page-link" href="javascript:void(0)">@i</a>
                            </li>
                        }
                    }
                }
            }
            else if (secondDesign)
            {
                <li class="page-item">
                    <a @onclick="() => BudgetData(1)" class="page-link" href="javascript:void(0)">1</a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="javascript:void(0)">...</a>
                </li>
                @for (int i = Model.CurrentPageNo - 2; i <= Model.CurrentPageNo + 2; i++)
                {
                    if (i == Model.CurrentPageNo)
                    {
                        <li class="page-item active">
                            <a class="page-link" href="javascript:void(0)">@i</a>
                        </li>
                    }
                    else
                    {
                        <li class="page-item">
                            <a @onclick="() => BudgetData(1)" class="page-link" href="javascript:void(0)">@i</a>
                        </li>
                    }
                }
                <li class="page-item">
                    <a class="page-link" href="javascript:void(0)">...</a>
                </li>
                <li class="page-item">
                    <a @onclick="() => BudgetData(Model.TotalPageNo)" class="page-link" href="javascript:void(0)">@Model.TotalPageNo</a>
                </li>
            }
            @if (Model.CurrentPageNo != Model.TotalPageNo)
            {
                <li class="page-item">
                    <a @onclick="() => BudgetData(Model.CurrentPageNo + 1)" class="page-link" href="javascript:void(0)" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                        <span class="sr-only">Next</span>
                    </a>
                </li>
            }
        </ul>
    </nav>
}
@code {
    [Parameter]
    public BudgetResponseDataModel Model { get; set; }

    async Task BudgetData(int pageNo)
    {
        var result = await db.BudgetPagination(pageNo, 4);
        Model = result;
    }
}
